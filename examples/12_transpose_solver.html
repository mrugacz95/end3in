<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Shapes</title>
    <script src="../build/end3in.js"></script>
</head>
<body></body>
<script>
    const Engine = end3in.Engine,
        Rectangle = end3in.Rectangle,
        Collision = end3in.Collision,
        Graphics = end3in.Graphics,
        Polygon = end3in.Polygon,
        Circle = end3in.Circle,
        Vec2 = end3in.Vec2;

    let engine = new Engine(false, 'translation');

    const obj = new Polygon([[-0.5, 1.0], [2.0, 1.0], [0.5, 0.0]], 0, 0, 50, false)
    engine.addBody(obj)

    for (let i = 0; i < 6; i++) {
        engine.addBody(new Rectangle(0.5 + Math.random() * 0.1, 0.5 + Math.random() * 0.1, (Math.random() - 0.5) * 5, (Math.random() - 0.5) * 5, 1, Math.random() >= 0.8));
        engine.addBody(new Polygon([[0.0, 0.0], [0.5, 0.0], [0.3, -0.8]], (Math.random() - 0.5) * 5, (Math.random() - 0.5) * 5, 1, Math.random() >= 0.8));
        engine.addBody(new Circle(Math.random() * 0.2 + 0.2, (Math.random() - 0.5) * 5, (Math.random() - 0.5) * 5, 1, Math.random() >= 0.8));
    }
    engine.addBody(new Rectangle(7, 1, -0, 4, 1, true));
    engine.start();

    const graphics = new Graphics({width: 1500, height: 1500, engine: engine, debug: true, cameraPos: new Vec2(4, 4)})
    graphics.start()

    document.addEventListener("keydown", event => {
        if (event.isComposing || event.code === 'ArrowUp') {
            obj.applyImpulse(new Vec2(0, 5), Vec2.ZERO)
        }
        if (event.isComposing || event.code === 'ArrowDown') {
            obj.applyImpulse(new Vec2(0, -5), Vec2.ZERO)
        }
        if (event.isComposing || event.code === 'ArrowLeft') {
            obj.applyImpulse(new Vec2(5, 0), Vec2.ZERO)
        }
        if (event.isComposing || event.code === 'ArrowRight') {
            obj.applyImpulse(new Vec2(-5, 0), Vec2.ZERO)
        }
    });
</script>
</html>